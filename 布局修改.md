# ç»„ä»¶åˆ—å¸ƒå±€ä¿®æ”¹æ–¹æ¡ˆ

## ğŸ“‹ ä¿®æ”¹æ¦‚è¿°

å°†å½“å‰ `ComponentColumn.tsx` ç»„ä»¶ä¸­çš„åˆ—æ ‡é¢˜ï¼ˆ`column-title`ï¼‰æ‹†åˆ†ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œä»¥ä¼˜åŒ–ç»„ä»¶ç»“æ„å’Œå¸ƒå±€ç®¡ç†ã€‚

## ğŸ¯ ä¿®æ”¹ç›®æ ‡

1. **ç»„ä»¶æ‹†åˆ†**ï¼šå°† `column-title` ä» `ComponentColumn.tsx` ä¸­åˆ†ç¦»ä¸ºç‹¬ç«‹ç»„ä»¶
2. **å¸ƒå±€ä¼˜åŒ–**ï¼šä¸ºç‹¬ç«‹çš„åˆ—æ ‡é¢˜ç»„ä»¶è…¾å‡ºæ˜¾ç¤ºç©ºé—´
3. **å¯¹é½ä¿æŒ**ï¼šç¡®ä¿æ‰€æœ‰ç»„ä»¶çš„å‚ç›´å¯¹é½å…³ç³»ä¸å½“å‰çŠ¶æ€ä¸€è‡´

## ğŸ—ï¸ ç»„ä»¶ç»“æ„å˜æ›´

### å½“å‰ç»“æ„
```
MainLayout
â”œâ”€â”€ ComponentColumn (ç¡¬ä»¶ç­¾åå™¨)
â”‚   â”œâ”€â”€ column-title ("ç¡¬ä»¶ç­¾åå™¨")
â”‚   â””â”€â”€ components-grid
â”œâ”€â”€ ComponentColumn (è½¯ä»¶é’±åŒ…)
â”‚   â”œâ”€â”€ column-title ("è½¯ä»¶é’±åŒ…")
â”‚   â””â”€â”€ components-grid
â””â”€â”€ ComponentColumn (åŒºå—é“¾èŠ‚ç‚¹)
    â”œâ”€â”€ column-title ("åŒºå—é“¾èŠ‚ç‚¹")
    â””â”€â”€ components-grid
```

### ç›®æ ‡ç»“æ„
```
MainLayout
â”œâ”€â”€ ColumnTitle ("ç¡¬ä»¶ç­¾åå™¨")
â”œâ”€â”€ ComponentColumn (ç¡¬ä»¶ç­¾åå™¨)
â”‚   â””â”€â”€ components-grid
â”œâ”€â”€ ColumnTitle ("è½¯ä»¶é’±åŒ…")
â”œâ”€â”€ ComponentColumn (è½¯ä»¶é’±åŒ…)
â”‚   â””â”€â”€ components-grid
â”œâ”€â”€ ColumnTitle ("åŒºå—é“¾èŠ‚ç‚¹")
â””â”€â”€ ComponentColumn (åŒºå—é“¾èŠ‚ç‚¹)
    â””â”€â”€ components-grid
```

## ğŸ“ æ–‡ä»¶ä¿®æ”¹è®¡åˆ’

### 1. æ–°å¢æ–‡ä»¶
- **`src/components/ColumnTitle.tsx`** - ç‹¬ç«‹çš„åˆ—æ ‡é¢˜ç»„ä»¶

### 2. ä¿®æ”¹æ–‡ä»¶
- **`src/components/ComponentColumn.tsx`** - ç§»é™¤åˆ—æ ‡é¢˜ç›¸å…³ä»£ç 
- **`src/components/MainLayout.tsx`** - æ›´æ–°ç»„ä»¶æ¸²æŸ“é€»è¾‘
- **`src/components/BottomFeatureDock.tsx`** - æ›´æ–°ä½ç½®æµ‹é‡é€»è¾‘

## ğŸ”§ å…·ä½“å®æ–½æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»º ColumnTitle.tsx ç»„ä»¶

```typescript
// src/components/ColumnTitle.tsx
import React from 'react';

interface ColumnTitleProps {
  title: string;
}

const ColumnTitle: React.FC<ColumnTitleProps> = ({ title }) => {
  return (
    <h2 className="column-title">{title}</h2>
  );
};

export default ColumnTitle;
```

**ç‰¹ç‚¹**ï¼š
- ä»…æ¥æ”¶ `title` å­—ç¬¦ä¸²å±æ€§
- å†…å®¹å†™æ­»ï¼šä»å·¦åˆ°å³åˆ†åˆ«ä¸º"ç¡¬ä»¶ç­¾åå™¨"ã€"è½¯ä»¶é’±åŒ…"ã€"åŒºå—é“¾èŠ‚ç‚¹"
- ä½¿ç”¨ç°æœ‰çš„ `.column-title` CSS ç±»
- æ— éœ€å“åº”å¼å¤„ç†

### æ­¥éª¤2ï¼šä¿®æ”¹ ComponentColumn.tsx

**ç§»é™¤å†…å®¹**ï¼š
- `title` å±æ€§
- `column-title` ç›¸å…³ JSX
- `column-title` ç›¸å…³çš„ ref é€»è¾‘

**ä¿ç•™å†…å®¹**ï¼š
- `components-grid` ç›¸å…³ä»£ç 
- ç»„ä»¶çŠ¶æ€é€»è¾‘
- ç‚¹å‡»å¤„ç†é€»è¾‘

```typescript
// ä¿®æ”¹åçš„ ComponentColumn.tsx ç»“æ„
const ComponentColumn = React.forwardRef<HTMLDivElement, ComponentColumnProps>(({
  components,
  selectedComponents,
  getComponentState,
  onComponentClick,
  type
}, ref) => {
  return (
    <div className="component-column" ref={ref}>
      {/* ç§»é™¤ column-title */}
      <div className="components-grid">
        {/* ä¿ç•™ç°æœ‰çš„ç»„ä»¶ç½‘æ ¼é€»è¾‘ */}
      </div>
    </div>
  );
});
```

### æ­¥éª¤3ï¼šæ›´æ–° MainLayout.tsx

**ä¿®æ”¹å†…å®¹**ï¼š
- å¯¼å…¥ `ColumnTitle` ç»„ä»¶
- æ›´æ–°æ¸²æŸ“é€»è¾‘ï¼Œåˆ†åˆ«æ¸²æŸ“ `ColumnTitle` å’Œ `ComponentColumn`
- è°ƒæ•´ ref ç®¡ç†é€»è¾‘

```typescript
// ä¿®æ”¹åçš„ MainLayout.tsx ç»“æ„
import ColumnTitle from './ColumnTitle';

// æ›´æ–° ref ç®¡ç†
const signerTitleRef = useRef<HTMLDivElement>(null);
const walletTitleRef = useRef<HTMLDivElement>(null);
const nodeTitleRef = useRef<HTMLDivElement>(null);

// æ›´æ–°æ¸²æŸ“é€»è¾‘
<ColumnTitle title="ç¡¬ä»¶ç­¾åå™¨" ref={signerTitleRef} />
<ComponentColumn
  components={sortedHardwareSigners}
  selectedComponents={selectedSigners}
  getComponentState={(id: string) => getComponentState(id, 'signer')}
  onComponentClick={(id: string) => onComponentClick(id, 'signer')}
  type="signer"
  ref={signerRef}
/>
```

### æ­¥éª¤4ï¼šæ›´æ–° BottomFeatureDock.tsx

**ä¿®æ”¹å†…å®¹**ï¼š
- æ›´æ–°ä½ç½®æµ‹é‡é€»è¾‘ï¼Œæµ‹é‡ `ColumnTitle` ç»„ä»¶è€Œé `ComponentColumn` å†…çš„ `.column-title`
- è°ƒæ•´ ref å¼•ç”¨

```typescript
// ä¿®æ”¹åçš„ä½ç½®æµ‹é‡é€»è¾‘
const measure = () => {
  const getTitleCenter = (titleEl?: HTMLElement | null): number | undefined => {
    if (!titleEl) return undefined;
    
    // ç›´æ¥æµ‹é‡ ColumnTitle ç»„ä»¶
    const rect = titleEl.getBoundingClientRect();
    return Math.round(rect.left + rect.width / 2);
  };

  setCenters({
    signer: getTitleCenter(signerTitleRef.current),
    wallet: getTitleCenter(walletTitleRef.current),
    node: getTitleCenter(nodeTitleRef.current)
  });
};
```

## ğŸ¨ æ ·å¼å’Œå¸ƒå±€

### CSS æ ·å¼ä¿æŒ
- **`.column-title`** æ ·å¼ä¿æŒä¸å˜
- **`.component-column`** æ ·å¼ä¿æŒä¸å˜
- **`.components-grid`** æ ·å¼ä¿æŒä¸å˜
- **é—´è·**ï¼šç¡®ä¿ `ColumnTitle` å’Œ `ComponentColumn` ä¹‹é—´çš„é—´è·ä¸å½“å‰ä¸€è‡´

### å¸ƒå±€å¯¹é½
- **å‚ç›´å¯¹é½**ï¼š`ColumnTitle` å’Œ `components-grid` ä¸­å¿ƒçº¿å‚ç›´å¯¹é½
- **åº•éƒ¨ç‰¹æ€§æ¡†å¯¹é½**ï¼š`BottomFeatureDock` ä¸ `ColumnTitle` ä¸­å¿ƒçº¿å¯¹é½
- **å“åº”å¼**ï¼š`ColumnTitle` æ— éœ€å“åº”å¼å¤„ç†ï¼Œ`components-grid` ä¿æŒåŸæœ‰å“åº”å¼é€»è¾‘

## ğŸ” éªŒè¯è¦ç‚¹

### åŠŸèƒ½éªŒè¯
1. âœ… ä¸‰ä¸ªåˆ—æ ‡é¢˜æ­£ç¡®æ˜¾ç¤ºï¼š"ç¡¬ä»¶ç­¾åå™¨"ã€"è½¯ä»¶é’±åŒ…"ã€"åŒºå—é“¾èŠ‚ç‚¹"
2. âœ… ç»„ä»¶é€‰æ‹©åŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. âœ… çŠ¶æ€è®¡ç®—é€»è¾‘æ­£ç¡®
4. âœ… è¿›åº¦æ¡è®¡ç®—æ­£ç¡®

### å¸ƒå±€éªŒè¯
1. âœ… åˆ—æ ‡é¢˜ä¸ç»„ä»¶ç½‘æ ¼å‚ç›´å¯¹é½
2. âœ… åº•éƒ¨ç‰¹æ€§æ¡†ä¸åˆ—æ ‡é¢˜ä¸­å¿ƒçº¿å¯¹é½
3. âœ… é—´è·ä¸å½“å‰çŠ¶æ€ä¸€è‡´
4. âœ… å“åº”å¼å¸ƒå±€æ­£å¸¸å·¥ä½œ

### æ€§èƒ½éªŒè¯
1. âœ… ä½ç½®æµ‹é‡é€»è¾‘æ­£å¸¸å·¥ä½œ
2. âœ… ResizeObserver æ­£ç¡®ç›‘å¬
3. âœ… å­—ä½“åŠ è½½åé‡æ–°æµ‹é‡
4. âœ… æ— æ˜æ˜¾çš„å¸ƒå±€æŠ–åŠ¨

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»º `ColumnTitle.tsx` ç»„ä»¶
- [ ] ä¿®æ”¹ `ComponentColumn.tsx`ï¼Œç§»é™¤åˆ—æ ‡é¢˜ç›¸å…³ä»£ç 
- [ ] æ›´æ–° `MainLayout.tsx`ï¼Œè°ƒæ•´ç»„ä»¶æ¸²æŸ“é€»è¾‘
- [ ] æ›´æ–° `BottomFeatureDock.tsx`ï¼Œè°ƒæ•´ä½ç½®æµ‹é‡é€»è¾‘
- [ ] æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§
- [ ] éªŒè¯å¸ƒå±€å¯¹é½
- [ ] æ£€æŸ¥å“åº”å¼å¸ƒå±€
- [ ] æ€§èƒ½æµ‹è¯•

## ğŸš€ é¢„æœŸæ•ˆæœ

ä¿®æ”¹å®Œæˆåï¼Œç½‘ç«™å°†å…·æœ‰ï¼š
1. **æ›´æ¸…æ™°çš„ç»„ä»¶ç»“æ„**ï¼šåˆ—æ ‡é¢˜å’Œç»„ä»¶ç½‘æ ¼åˆ†ç¦»
2. **æ›´å¥½çš„å¯ç»´æŠ¤æ€§**ï¼šç‹¬ç«‹çš„åˆ—æ ‡é¢˜ç»„ä»¶ä¾¿äºç®¡ç†
3. **ä¸€è‡´çš„è§†è§‰æ•ˆæœ**ï¼šä¸å½“å‰çŠ¶æ€å®Œå…¨ä¸€è‡´
4. **ç¨³å®šçš„å¯¹é½å…³ç³»**ï¼šåº•éƒ¨ç‰¹æ€§æ¡†æ­£ç¡®å¯¹é½

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ  
**çŠ¶æ€**: å¾…å®æ–½  
**é¢„è®¡å·¥ä½œé‡**: 2-3å°æ—¶
